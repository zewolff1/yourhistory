<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Unemployment Line Graph</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 40px auto;
    }
  </style>
</head>
<body>

<h2>U.S. Unemployment During the Great Depression</h2>
<canvas id="lineChart"></canvas>

<script>
  const labels = [
    '1929','1930','1931','1932','1933','1934','1935','1936',
    '1937','1938','1939','1940','1941','1942','1943'
  ];

  const data = [
    3.2, 8.7, 15.9, 23.6, 24.9, 21.7, 20.1, 16.9,
    14.3, 19.0, 17.2, 14.6, 9.9, 4.7, 1.9
  ];

  // Tooltip text ONLY for selected years
  const tooltipNotes = {
    '1933': 'New Deal Begins',
    '1941': 'U.S. Joins World War II'
  };

  // Highlight only these indices
  const highlightYears = ['1933', '1941'];

  const ctx = document.getElementById('lineChart').getContext('2d');

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [{
        label: 'Unemployment Rate (%)',
        data: data,
        tension: 0.3,
        fill: false,

        // Point styling
        pointRadius: (context) =>
          highlightYears.includes(context.chart.data.labels[context.dataIndex]) ? 7 : 3,

        pointHoverRadius: (context) =>
          highlightYears.includes(context.chart.data.labels[context.dataIndex]) ? 9 : 0,

        pointBackgroundColor: (context) =>
          highlightYears.includes(context.chart.data.labels[context.dataIndex]) ? '#d32f2f' : '#1976d2',

        pointBorderWidth: (context) =>
          highlightYears.includes(context.chart.data.labels[context.dataIndex]) ? 2 : 0
      }]
    },
    options: {
      responsive: true,
      interaction: {
        mode: 'nearest',
        intersect: true
      },
      plugins: {
        tooltip: {
          filter: function(context) {
            // ONLY allow tooltips on highlighted years
            return highlightYears.includes(context.label);
          },
          callbacks: {
            label: function(context) {
              return context.parsed.y + '%';
            },
            afterLabel: function(context) {
              return tooltipNotes[context.label];
            }
          }
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          title: {
            display: true,
            text: 'Percent Unemployed'
          }
        },
        x: {
          title: {
            display: true,
            text: 'Year'
          }
        }
      }
    }
  });
</script>

</body>
</html>
